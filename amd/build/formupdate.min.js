define("contenttype_repurpose/formupdate",["exports","core/fragment","core/notification","core/templates"],(function(_exports,_fragment,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_fragment=_interopRequireDefault(_fragment),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);const handleChange=(contextid,library,e)=>{if(e.target.closest('form #id_category, form #id_recurse, form #id_question, form [data-action="update"]')){let form=e.target.closest("form");e.stopPropagation(),e.preventDefault(),updateForm(contextid,library,form)}},updateForm=(contextid,library,form)=>{let data={},formdata=new FormData(form),params={contextid:contextid,library:library,plugin:"repurpose"};window.onbeforeunload=null,formdata.forEach(((value,key)=>{data[key]=value})),params.jsonformdata=JSON.stringify(data),_fragment.default.loadFragment("contenttype_repurpose","formupdate",contextid,params).done((function(html,js){document.removeEventListener("change",updateForm.bind(window,contextid,library)),_templates.default.replaceNodeContents(form,html,js),form.parentNode.insertBefore(form.firstChild,form),form.remove()})).fail(_notification.default.exception)};var _default={init:(contextid,library)=>{document.removeEventListener("change",handleChange.bind(window,contextid,library)),document.addEventListener("change",handleChange.bind(window,contextid,library))},updateForm:updateForm};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=formupdate.min.js.map